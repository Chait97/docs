---
// Redirect from base to /en/ pages
import { getCollection } from 'astro:content';
import { splitSlugFromLang } from '~/util';

export async function getStaticPaths() {
	// get english pages that moved from `/` to `/en/`
	const englishPages = await getCollection('docs', ({ id }) => id.startsWith('en/'));

	return englishPages.map((page) => {
		return {
			params: {
				enRedirectSlug: splitSlugFromLang(page.slug).slug,
			},
			props: {
				englishSlug: page.slug,
			},
		};
	});
}
---

<meta http-equiv="refresh" content={`0;url=${Astro.props.englishSlug}`} />
