---
import { getCollection } from 'astro:content';
import { splitSlugFromLang } from '~/util';

export async function getStaticPaths() {
	// get english pages that moved from `/` to `/en/`
	const baseLevelEnglishPages = await getCollection('docs', ({ id }) => {
		const isNested = id.split('/').length > 2;
		return !isNested && id.startsWith('en/');
	});

	return englishPages.map((page) => {
		return {
			params: {
				enRedirectSlug: splitSlugFromLang(page.slug).slug,
			},
			props: {
				englishSlug: page.slug,
			},
		};
	});
}
---

<meta http-equiv="refresh" content={`0;url=/docs${Astro.props.englishSlug}`} />
